{% extends 'pages/base.html' %}


{% block content %}

<div class="row">
<div class="col-lg-3 col-md-3 col-sm-6 mx-auto">
{% include 'pages/includes/_sidebar.html' %}
</div>

<div class="col-md-9 col-sm-12">


  
<div class="table-responsive">
  <table class="table">
  <caption>List of ongoing chats </caption>
    <thead>
      <tr>
        <th>Chat</th>
        <th>Unread</th>
      </tr>
    </thead>
    <tbody>

          {% for tw, u in chat_details %}
          <tr>
            <td>
              <a href="{% url 'conversations:chatbox' tw.chat_id%}">
                  <p> {{forloop.counter}} chat with {{tw.profile}}</p>
              </a> 
            </td>

            <td>{% if u != False %} <h5><span class="badge badge-primary badge-pill">{{u}}</span></h5> {% else %}<p> - </p>{% endif %}</td>
            <td><a href="{% url 'conversations:delete_chat' tw.chat_id %}" class="btn btn-outline-danger ">Delete chat</a></td>
          </tr>          
          {% endfor %}

        </tbody>
  </table>
</div>




{% if friends %}

<div class="table-responsive">  
  <table class="table">
  <caption>Start a new chat with: </caption>
    <thead>
      <tr>
        <th>Username</th>
        <th>Email</th>
      </tr>
    </thead>
    <tbody>
      {% for f in friends %}
      <tr>
        <td>{{f}}</td>
        <td>{{f.user.email}}</td>
        {% if request.user.profile.id == profile.id %}
        <td><a href="{% url 'conversations:inbox_new_chat' f.id %}" class="btn btn-outline-info ">Start chatting</a></td>
        {% endif %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>  

{% endif %}

</div>
</div>

{% endblock content %}